local player = game.Players.LocalPlayer
local playergui = player:WaitForChild("PlayerGui")
local screenguiname = "TurquoizExecV2"
local orgSize = UDim2.new(0.22361, 0, 0.4164, 0)
local minSize = UDim2.new(0.028332, 0, 0.05828, 0)

local screengui, frame, cmdbox, dragdetector, title, runButton, minimiseButton, uicorner, closeButton

local function create()
	if playergui:FindFirstChild(screenguiname) then
		return
	end

	screengui = Instance.new("ScreenGui")
	screengui.Name = screenguiname
	screengui.Parent = playergui

	frame = Instance.new("Frame")
	frame.Position = UDim2.new(0.3,0,0.4,0)
	frame.Size = orgSize
	frame.Parent = screengui
	frame.BackgroundColor3 = Color3.fromRGB(188, 213, 255)

	uicorner = Instance.new("UICorner")
	uicorner.Parent = frame

	dragdetector = Instance.new("UIDragDetector")
	dragdetector.Parent = frame

	cmdbox = Instance.new("TextBox")
	cmdbox.ClearTextOnFocus = false
	cmdbox.Position = UDim2.new(0, 0, 0.3333, 0)
	cmdbox.Size = UDim2.new(1, 0, 0.6667, 0)
	cmdbox.ZIndex = 2
	cmdbox.Parent = frame
	cmdbox.Text = ""
	cmdbox.PlaceholderText = "Insert LUA here.."
	cmdbox.BackgroundColor3 = Color3.fromRGB(0, 200, 109)
	cmdbox.PlaceholderColor3 = Color3.fromRGB(0, 0, 0)
	cmdbox.MultiLine = true
	cmdbox.TextSize = 12
	cmdbox.ClipsDescendants = true
	cmdbox.TextXAlignment = "Left"
	cmdbox.TextYAlignment = "Top"

	uicorner = Instance.new("UICorner")
	uicorner.Parent = cmdbox

	title = Instance.new("TextLabel")
	title.Parent = frame
	title.Text = "Turquoiz Executor V1.0.1"
	title.Size = UDim2.new(0.7, 0, 0.1, 0)
	title.BackgroundTransparency = 1
	title.TextSize = 12

	runButton = Instance.new("TextButton")
	runButton.Parent = frame
	runButton.Text = "Run"
	runButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
	runButton.Size = UDim2.new(0.3333, 0, 0.1, 0)
	runButton.TextColor = BrickColor.new("Grey")
	runButton.Position = UDim2.new(0.3333, 0, 0.2, 0)

	uicorner = Instance.new("UICorner")
	uicorner.Parent = runButton

	runButton.MouseButton1Click:Connect(function()
		local func, err = loadstring(cmdbox.Text)
		if func then
			local success, runtimeErr = pcall(func)
			if not success then
				warn("Runtime error:", runtimeErr)
			end
		else
			warn("Syntax error:", err)
		end
	end)

	minimiseButton = Instance.new("TextButton")
	minimiseButton.Parent = frame
	minimiseButton.Size = UDim2.new(0.06, 0, 0.07, 0)
	minimiseButton.Position = UDim2.new(0.8, 0, 0.05, 0)
	minimiseButton.Text = "-"
	minimiseButton.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
	minimiseButton.TextScaled = true

	closeButton = Instance.new("TextButton")
	closeButton.Parent = frame
	closeButton.Size = UDim2.new(0.06, 0, 0.07, 0)
	closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
	closeButton.Text = "X"
	closeButton.Position = UDim2.new(0.8, 0, 0.127, 0)

	closeButton.Activated:Connect(function()
		if screengui then
			screengui:Destroy()
		end
		if script then
			script:Destroy()
		end
	end)

	local isMinimized = false

	minimiseButton.Activated:Connect(function()
		if not isMinimized then
			frame.Size = minSize
			for _, i in frame:GetChildren() do
				if i == minimiseButton or i == closeButton or i.Name == "UICorner" or i.Name == "UIDragDetector" then
					if i == minimiseButton then
						i.Size = UDim2.new(0.5, 0, 0.5, 0)
						i.Position = UDim2.new(0, 0, 0, 0)
						i.Visible = true
					end
					if i == closeButton then
						i.Size = UDim2.new(0.5, 0, 0.5, 0)
						i.Position = UDim2.new(0, 0, 0.5, 0)
						i.Visible = true
					end
				else
					i.Visible = false
				end
			end
			isMinimized = true
			frame.Position = UDim2.new(-0.014166, 0, 0.7, 0)
		else
			frame.Size = orgSize
			for _, i in frame:GetChildren() do
				if i == minimiseButton or i == closeButton or i.Name == "UICorner" or i.Name == "UIDragDetector" then
					if i == minimiseButton then
						i.Size = UDim2.new(0.06, 0, 0.07, 0)
						i.Position = UDim2.new(0.8, 0, 0.05, 0)
						i.Visible = true
					end
					if i == closeButton then
						i.Size = UDim2.new(0.06, 0, 0.07, 0)
						i.Position = UDim2.new(0.8, 0, 0.127, 0)
						i.Visible = true
					end
				else
					i.Visible = true
				end
			end
			isMinimized = false
		end
	end)
end

player.CharacterAdded:Connect(function()
	task.wait(0.2)
	create()
end)

create()
